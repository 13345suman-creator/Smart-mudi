<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#1a5f2a">
<title>Smart Mudi Khana - à¦¦à§‹à¦•à¦¾à¦¨ à¦®à§à¦¯à¦¾à¦¨à§‡à¦œà¦¾à¦°</title>

<link rel="stylesheet" href="style.css">

<!-- QR / Barcode -->
<script src="qrcode.min.js"></script>
<script src="html5-qrcode.min.js"></script>
</head>

<body>

<div id="app">

<!-- ================= HEADER ================= -->
<header class="header no-print">
  <div class="shop-name">
    <span id="animatedShopName" class="anim-slide">Smart Mudi Khana</span>
  </div>

  <div class="lang-toggle">
    <button onclick="setLang('bn')">à¦¬à¦¾à¦‚à¦²à¦¾</button>
    <button onclick="setLang('hi')">à¤¹à¤¿à¤‚à¤¦à¥€</button>
    <button onclick="setLang('en')">English</button>
  </div>

  <div class="date-display" id="currentDate"></div>
</header>

<!-- ================= MAIN ================= -->
<main class="main-content">

  <div id="dashboardSection">
    <h3>Welcome to Smart Mudi Khana</h3>
  </div>

  <!-- BILLING -->
  <div id="billingSection" style="display:none">
    <h3>ğŸ§¾ Billing</h3>
    <div id="billingItems">No items</div>
    <div id="billingTotal">Total: â‚¹0</div>
  </div>

  <!-- INVENTORY -->
  <div id="inventorySection" style="display:none">
    <h3>ğŸ“¦ Inventory</h3>
    <input placeholder="Product name">
    <button>Add</button>
  </div>

  <!-- UDHARI -->
  <div id="udhariSection" style="display:none;padding:10px">
    <h3>ğŸ“’ Udhari Khata</h3>

    <input id="udhariSearch"
      placeholder="Name / Phone à¦¦à¦¿à§Ÿà§‡ à¦–à§à¦à¦œà§à¦¨"
      oninput="renderUdhari()"
      style="width:100%;padding:8px;margin-bottom:8px">

    <div id="udhariList"></div>
  </div>

</main>

<!-- ================= NAV ================= -->
<nav class="nav-bar">
  <button onclick="showSection('dashboardSection')">ğŸ  Home</button>
  <button onclick="showSection('inventorySection')">ğŸ“¦ Stock</button>
  <button onclick="showSection('billingSection')">ğŸ§¾ Bill</button>
  <button onclick="showSection('udhariSection')">ğŸ“’ Udhari</button>
</nav>

</div>

<!-- ================= LOCK SCREEN ================= -->
<div id="lockScreen" style="
display:none;
position:fixed;
inset:0;
background:#1a5f2a;
color:#fff;
align-items:center;
justify-content:center;
z-index:9999;">
  <div>
    <h3>ğŸ”’ Locked</h3>
    <input id="lockPassword" type="password" placeholder="Password">
    <button onclick="unlockApp()">Unlock</button>
  </div>
</div>

<!-- ================= JS (INLINE FIX) ================= -->
<script>
/* ===== BASIC NAV ===== */
function showSection(id){
  ["dashboardSection","billingSection","inventorySection","udhariSection"]
    .forEach(s=>{
      const el=document.getElementById(s);
      if(el) el.style.display="none";
    });
  const sec=document.getElementById(id);
  if(sec) sec.style.display="block";
}

/* ===== DATE ===== */
document.getElementById("currentDate").innerText =
  new Date().toLocaleDateString();

/* ===== LANGUAGE PLACEHOLDER ===== */
function setLang(l){
  alert("Language set: "+l);
}

/* ===== UDHARI LOGIC ===== */
let udhariData = JSON.parse(localStorage.getItem("udhariData") || "[]");

if(udhariData.length===0){
  udhariData = [
    {name:"Raju", phone:"9876543210", amount:500},
    {name:"Amit", phone:"9123456789", amount:1200}
  ];
  localStorage.setItem("udhariData",JSON.stringify(udhariData));
}

function renderUdhari(){
  const list=document.getElementById("udhariList");
  const q=(document.getElementById("udhariSearch").value||"").toLowerCase();
  list.innerHTML="";

  const filtered=udhariData.filter(u =>
    u.name.toLowerCase().includes(q) ||
    u.phone.includes(q)
  );

  if(filtered.length===0){
    list.innerHTML="<p>No udhari found</p>";
    return;
  }

  filtered.forEach(u=>{
    const d=document.createElement("div");
    d.style.border="1px solid #ccc";
    d.style.marginBottom="6px";
    d.style.padding="6px";
    d.innerHTML=`<b>${u.name}</b><br>ğŸ“ ${u.phone}<br>â‚¹ ${u.amount}`;
    list.appendChild(d);
  });
}

/* ===== PASSWORD (OPTIONAL) ===== */
function unlockApp(){
  document.getElementById("lockScreen").style.display="none";
}
</script>

<!-- ORIGINAL APP JS (UNCHANGED, OPTIONAL) -->
<script src="js/app.js"></script>

</body>
</html>